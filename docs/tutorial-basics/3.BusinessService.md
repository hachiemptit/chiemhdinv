---
sidebar_position: 3
---

# 3.Nh√≥m h√†m BusinessService

## H√†m h·ªßy h√≥a ƒë∆°n
H·ªßy h√≥a ƒë∆°n: `cancelInvNoPay`:

H√†m: `cancelInvNoPay(Account, ACpass, Fkey , userName, userPass)`

### **M√¥ t·∫£**
ƒê√¢y l√† web service th·ª±c hi·ªán h·ªßy h√≥a ƒë∆°n theo gi√° tr·ªã fkey truy·ªÅn v√†o

### **Tham s·ªë ƒë·∫ßu v√†o**

  - userName/userPass: L√† t√†i kho·∫£n RoleService trong h·ªá th·ªëng.
  - Account/ACPass:  T√†i kho·∫£n ƒë∆∞·ª£c c·∫•p ph√°t cho nh√¢n vi√™n g·ªçi l·ªánh ph√°t h√†nh h√≥a ƒë∆°n
  - fkey:Chu·ªói x√°c ƒë·ªãnh h√≥a ƒë∆°n c·∫ßn h·ªßy 

### **K·∫øt qu·∫£ ƒë·∫ßu ra**
N·∫øu h√†m g·ª≠i th√†nh c√¥ng, k·∫øt qu·∫£ ƒë·∫ßu ra s·∫Ω l√†:

```shell
OK

```

### **M√£ l·ªói trong qu√° tr√¨nh t√≠ch h·ª£p**

:::danger ERR1

T√†i kho·∫£n ƒëƒÉng nh·∫≠p sai ho·∫∑c kh√¥ng c√≥ quy·ªÅn

:::

:::danger ERR2

Kh√¥ng t√¨m th·∫•y h√≥a ƒë∆°n

:::

:::danger ERR6

L·ªói kh√¥ng x√°c ƒë·ªãnh

:::

:::danger ERR7

Kh√¥ng t√¨m th·∫•y th√¥ng tin c√¥ng ty t∆∞∆°ng ·ª©ng, ho·∫∑c l·ªói kh√¥ng x√°c ƒë·ªãnh

:::

:::danger ERR8

H√≥a ƒë∆°n ƒë√£ b·ªã ƒëi·ªÅu ch·ªânh / h·ªßy / h√≥a ƒë∆°n m·ªõi t·∫°o kh√¥ng th·ªÉ h·ªßy ƒë∆∞·ª£c

:::

:::danger ERR20

D·∫£i h√≥a ƒë∆°n h·∫øt, User/Account kh√¥ng c√≥ quy·ªÅn v·ªõi Serial/Pattern v√† serial kh√¥ng ph√π h·ª£p

:::

## H√†m thay th·∫ø h√≥a ƒë∆°n
H√†m thay th·∫ø h√≥a ƒë∆°n `ReplaceInvMTT`:

H√†m: `ReplaceInvMTT(Account, ACpass, xmlInvData, username, pass, fkey, Attachfile, convert, pattern, serial, OldPattern)`

### **M√¥ t·∫£**
ƒê√¢y l√† web service th·ª±c hi·ªán thay th·∫ø h√≥a ƒë∆°n

### **Tham s·ªë ƒë·∫ßu v√†o**
  - userName / userPass: T√†i kho·∫£n ƒë∆∞·ª£c c·∫•p ph√°t cho kh√°ch h√†ng ƒë·ªÉ g·ªçi ƒë·∫øn webservice (t√†i kho·∫£n c√≥ quy·ªÅn ServiceRole trong h·ªá th·ªëng).
  - Account/ACPass:  T√†i kho·∫£n ƒë∆∞·ª£c c·∫•p ph√°t cho nh√¢n vi√™n g·ªçi l·ªánh ph√°t h√†nh h√≥a ƒë∆°n
  - xmlInvData: String XML d·ªØ li·ªáu h√≥a ƒë∆°n c≈© v√† h√≥a ƒë∆°n thay th·∫ø
  - fkey: Chu·ªói x√°c ƒë·ªãnh h√≥a ƒë∆°n c·∫ßn thay th·∫ø
  - Convert: M·∫∑c ƒë·ªãnh l√† 0, (0 ‚Äì Kh√¥ng c·∫ßn convert t·ª´ TCVN3 sang Unicode. 1- C·∫ßn convert t·ª´ TCVN3 sang Unicode)
  - Pattern: M·∫´u s·ªë
  - Serial: K√Ω hi·ªáu
  - AttachFile: ƒê∆∞·ªùng d·∫´n file bi√™n b·∫£n ho·∫∑c key ƒë·ªÉ sinh bi√™n b·∫£n t·ª± ƒë·ªông (=10: sinh bi√™n b·∫£n t·ª± ƒë·ªông, =11: sinh v√† k√Ω bi√™n b·∫£n t·ª± ƒë·ªông,  != 10 v√† !=11: ƒê∆∞·ªùng d·∫´n file bi√™n b·∫£n)
  - OldPattern: Pattern h√≥a ƒë∆°n c≈© (tr∆∞·ªùng h·ª£p mu·ªën thay th·∫ø kh√°c m·∫´u s·ªë)
```md title="M·∫´u xmlInvData"
<ThayTheHD>
   <key>Fkey c·ªßa h√≥a ƒë∆°n *</key>
   <TTChung>
    <NLap> Ng√†y l·∫≠p (ƒë·ªãnh d·∫°ng theo chu·∫©n thu·∫ø: yyyy-MM-dd)</Nlap>
    <DVTTe>ƒê∆°n v·ªã ti·ªÅn t·ªá *</DVTTe>
    <TGia>T·ª∑ gi√° (B·∫Øt bu·ªôc (Tr·ª´ tr∆∞·ªùng h·ª£p ƒê∆°n v·ªã ti·ªÅn t·ªá l√† VND))</TGia>
    <HTTToan>H√¨nh th·ª©c thanh to√°n </HTTToan>
    <TTKhac>
        <TTin>
          <TTruong>Extra</TTruong>
          <KDLieu>string</KDLieu>
          <DLieu>Extra test</DLieu>
        </TTin>
        <TTin>
          <TTruong>Extra1</TTruong>
          <KDLieu>string</KDLieu>
          <DLieu>Extra1 test</DLieu>
        </TTin>
        <TTin>
          <TTruong>Extra2</TTruong>
          <KDLieu>string</KDLieu>
          <DLieu>Extra2 test</DLieu>
        </TTin>
      </TTKhac>
     </TTChung>
     <NDHDon>
    <NMua>
      <Ten>T√™n</Ten>
      <MST>M√£ s·ªë thu·∫ø</MST>
      <SDThoai>S·ªë ƒëi·ªán tho·∫°i</SDThoai>
      <CCCDan>CƒÉn c∆∞·ªõc c√¥ng d√¢n </CCCDan>
      <DCTDTu>ƒê·ªãa ch·ªâ th∆∞ ƒëi·ªán t·ª≠ </DCTDTu>
      <MKHang>M√£ kh√°ch h√†ng </MKHang>
      <TTKhac>
          <TTin>
            <TTruong>Extra6</TTruong>
            <KDLieu>string</KDLieu>
             <DLieu>Extra6 test</DLieu>
          </TTin>
          <TTin>
            <TTruong>Extra7</TTruong>
            <KDLieu>string</KDLieu>
            <DLieu>Extra7 test</DLieu>
          </TTin>
          <TTin>
            <TTruong>Extra8</TTruong>
            <KDLieu>string</KDLieu>
            <DLieu>Extra8 test</DLieu>
          </TTin>
        </TTKhac>
    </NMua>
    <DSHHDVu>
      <HHDVu>
        <TChat>T√≠nh ch·∫•t * (1-H√†ng h√≥a, d·ªãch v·ª•; 2-Khuy·∫øn m·∫°i; 3-Chi·∫øt kh·∫•u th∆∞∆°ng m·∫°i (trong tr∆∞·ªùng h·ª£p mu·ªën th·ªÉ hi·ªán th√¥ng tin chi·∫øt kh·∫•u theo d√≤ng); 4-Ghi ch√∫/di·ªÖn gi·∫£i)</TChat>
        <STT>S·ªë th·ª© t·ª±</STT>
        <MHHDVu>M√£ h√†ng h√≥a, d·ªãch v·ª• (B·∫Øt bu·ªôc n·∫øu c√≥)</MHHDVu>
        <THHDVu>T√™n h√†ng h√≥a, d·ªãch v·ª• *</THHDVu>
        <DVTinh>ƒê∆°n v·ªã t√≠nh (B·∫Øt bu·ªôc n·∫øu c√≥)</DVTinh>
        <SLuong>S·ªë l∆∞·ª£ng (B·∫Øt bu·ªôc n·∫øu c√≥)</SLuong>
        <DGia>ƒê∆°n gi√° (B·∫Øt bu·ªôc n·∫øu c√≥)</DGia>
        <TLCKhau>T·ª∑ l·ªá % chi·∫øt kh·∫•u</TLCKhau>
        <STCKhau>S·ªë ti·ªÅn chi·∫øt kh·∫•u </STCKhau>
        <ThTien>Th√†nh ti·ªÅn (Th√†nh ti·ªÅn ch∆∞a c√≥ thu·∫ø GTGT) - B·∫Øt bu·ªôc tr·ª´ tr∆∞·ªùng h·ª£p TChat = 4</ThTien>
        <TSuat>Thu·∫ø su·∫•t (Thu·∫ø su·∫•t thu·∫ø GTGT)  Nh·∫≠n c√°c gi√° tr·ªã: -2 (KKKNT), -1 (KCT), 0, 5, 8, 10, 12.34 (thu·∫ø kh√°c: AB.CD), -3 (KHAC)</TSuat> <!--s·ª≠ d·ª•ng h√≥a ƒë∆°n GTGT-->
        <TThue>Ti·ªÅn thu·∫ø</TThue><!--s·ª≠ d·ª•ng h√≥a ƒë∆°n GTGT-->
                      <TSThue>Ti·ªÅn sau thu·∫ø</TSThue><!--s·ª≠ d·ª•ng h√≥a ƒë∆°n GTGT-->
        <TTKhac>
          <TTin>
            <TTruong>Extra1</TTruong>
            <KDLieu>string</KDLieu>
             <DLieu>Extra1 pd test</DLieu>
          </TTin>
          <TTin>
            <TTruong>Extra2</TTruong>
            <KDLieu>string</KDLieu>
            <DLieu>Extra2 pd test</DLieu>
          </TTin>
          </TTKhac>
        
      </HHDVu>
    </DSHHDVu>
    <TToan>
      <THTTLTSuat><!--s·ª≠ d·ª•ng h√≥a ƒë∆°n GTGT-->
        <LTSuat>
          <TSuat>Thu·∫ø su·∫•t (Thu·∫ø su·∫•t thu·∫ø GTGT)  Nh·∫≠n c√°c gi√° tr·ªã: -2 (KKKNT), -1 (KCT), 0, 5, 8, 10, 12.34 (thu·∫ø kh√°c: AB.CD), -3 (KHAC)</TSuat>
          <TThue>Ti·ªÅn thu·∫ø (Ti·ªÅn thu·∫ø GTGT)</TThue>
          <ThTien>Th√†nh ti·ªÅn (Th√†nh ti·ªÅn ch∆∞a c√≥ thu·∫ø GTGT)</ThTien>
        </LTSuat>
      </THTTLTSuat>
      <TgTCThue>T·ªïng ti·ªÅn ch∆∞a thu·∫ø (T·ªïng c·ªông th√†nh ti·ªÅn ch∆∞a c√≥ thu·∫ø GTGT) (B·∫Øt bu·ªôc v·ªõi h√≥a ƒë∆°n GTGT)</TgTCThue><!--s·ª≠ d·ª•ng h√≥a ƒë∆°n GTGT-->
      <TgTThue>T·ªïng ti·ªÅn thu·∫ø (T·ªïng c·ªông ti·ªÅn thu·∫ø GTGT) (B·∫Øt bu·ªôc v·ªõi h√≥a ƒë∆°n GTGT)</TgTThue><!--s·ª≠ d·ª•ng h√≥a ƒë∆°n GTGT-->
      <TTCKTMai>T·ªïng ti·ªÅn chi·∫øt kh·∫•u th∆∞∆°ng m·∫°i</TTCKTMai>
      <TgTTTBSo>T·ªïng ti·ªÅn thanh to√°n b·∫±ng s·ªë *</TgTTTBSo>
      <TgTTTBChu>T·ªïng ti·ªÅn thanh to√°n b·∫±ng ch·ªØ *</TgTTTBChu>
      <TTKhac>
          <TTin>
            <TTruong>Extra9</TTruong>
            <KDLieu>string</KDLieu>
             <DLieu>Extra9 test</DLieu>
          </TTin>
          <TTin>
            <TTruong>Extra10</TTruong>
            <KDLieu>string</KDLieu>
            <DLieu>Extra10 test</DLieu>
          </TTin>
          <TTin>
            <TTruong>Extra11</TTruong>
            <KDLieu>DateTime</KDLieu>
            <DLieu>ƒë·ªãnh d·∫°ng theo chu·∫©n thu·∫ø:(v√≠ d·ª•: yyyy-MM-dd)</DLieu>
          </TTin>
        </TTKhac>
    </TToan>
  </NDHDon>
</ThayTheHD>
```
### **K·∫øt qu·∫£ ƒë·∫ßu ra**
N·∫øu h√†m g·ª≠i th√†nh c√¥ng, k·∫øt qu·∫£ ƒë·∫ßu ra s·∫Ω l√†:

```shell
OK: pattern;serial-Fkey_invNumber_MCCQT

```
Trong ƒë√≥: 
- OK ü°™ ƒë√£ ph√°t h√†nh h√≥a ƒë∆°n thay th·∫ø
- Patterü°™ M·∫´u s·ªë c·ªßa h√≥a ƒë∆°n thay th·∫ø 
- Serial ü°™ serial c·ªßa h√≥a ƒë∆°n thay th·∫ø 
- Fkey-> fkey c·ªßa h√≥a ƒë∆°n
- invNumber: s·ªë h√≥a ƒë∆°n ƒëi·ªÅu ch·ªânh 
- MCCQT -> M√£ CQT

vd:
```shell
OK:1/004;C22MTC-81971004C22MTC128418474_128_M1-22-10F0B-00400000128
```
### **M√£ l·ªói trong qu√° tr√¨nh t√≠ch h·ª£p**

:::danger ERR1

T√†i kho·∫£n ƒëƒÉng nh·∫≠p sai ho·∫∑c kh√¥ng c√≥ quy·ªÅn

:::

:::danger ERR2

Pattern ho·∫∑c serial truy·ªÅn v√†o r·ªóng

:::

:::danger ERR3

D·ªØ li·ªáu xml ƒë·∫ßu v√†o kh√¥ng ƒë√∫ng quy ƒë·ªãnh

:::

:::danger ERR4

Kh√¥ng l·∫•y ƒë∆∞·ª£c th√¥ng tin c√¥ng ty (currentCompany null)

:::

:::danger ERR11

Pattern ho·∫∑c serial kh√¥ng ƒë√∫ng ƒë·ªãnh d·∫°ng

:::

:::danger ERR5

C√≥ l·ªói trong qu√° tr√¨nh thay th·∫ø h√≥a ƒë∆°n

:::

:::danger ERR6

D·∫£i h√≥a ƒë∆°n c≈© ƒë√£ h·∫øt

:::

:::danger ERR7

User name kh√¥ng ph√π h·ª£p, kh√¥ng t√¨m th·∫•y company t∆∞∆°ng ·ª©ng cho user.

:::

:::danger ERR8

H√≥a ƒë∆°n ƒë√£ ƒë∆∞·ª£c thay th·∫ø r·ªìi. Kh√¥ng th·ªÉ thay th·∫ø n·ªØa.

:::

:::danger ERR9

Tr·∫°ng th√°i h√≥a ƒë∆°n kh√¥ng ƒë∆∞·ª£c thay th·∫ø

:::

:::danger ERR13

L·ªói tr√πng fkey

:::

:::danger ERR14

L·ªói trong qu√° tr√¨nh th·ª±c hi·ªán c·∫•p s·ªë h√≥a ƒë∆°n

:::

:::danger ERR15

L·ªói khi th·ª±c hi·ªán Deserialize chu·ªói h√≥a ƒë∆°n ƒë·∫ßu v√†o (ng√†y h√≥a ƒë∆°n > ng√†y hi·ªán t·∫°i, h√≥a ƒë∆°n ngo·∫°i t·ªá kh√¥ng truy·ªÅn t·ª∑ gi√°)

:::

:::danger ERR16

Kh√¥ng t·ªìn t·∫°i h√≥a ƒë∆°n

:::

:::danger ERR17

Ng√†y h√≥a ƒë∆°n thay th·∫ø < ng√†y h√≥a ƒë∆°n b·ªã thay th·∫ø

:::

:::danger ERR19

Pattern truy·ªÅn v√†o kh√¥ng gi·ªëng v·ªõi h√≥a ƒë∆°n c·∫ßn ƒëi·ªÅu ch·ªânh

:::

:::danger ERR20

D·∫£i h√≥a ƒë∆°n h·∫øt, User/Account kh√¥ng c√≥ quy·ªÅn v·ªõi Serial/Pattern v√† serial kh√¥ng ph√π h·ª£p

:::

:::danger ERR21

Tr√πng s·ªë h√≥a ƒë∆°n

:::

:::danger ERR22

Th√¥ng tin ng∆∞·ªùi b√°n v∆∞·ª£t maxlength

:::

:::danger ERR23

M√£ CQT r·ªóng

:::

:::danger ERR29

L·ªói ch·ª©ng th∆∞ h·∫øt h·∫°n

:::

:::danger ERR30

Danh s√°ch h√≥a ƒë∆°n t·ªìn t·∫°i ng√†y h√≥a ƒë∆°n nh·ªè h∆°n ng√†y h√≥a ƒë∆°n ƒë√£ ph√°t h√†nh

:::

:::danger ERR60

Ch·ªâ ƒë∆∞·ª£c ph√©p ƒëi·ªÅu ch·ªânh h√≥a ƒë∆°n c√πng lo·∫°i (C√≥ m√£ t·ª´ m√°y t√≠nh ti·ªÅn).

:::

:::danger ERR61

Ch·ªâ ƒë∆∞·ª£c ph√©p ƒëi·ªÅu ch·ªânh h√≥a ƒë∆°n c√πng lo·∫°i (C√≥ m√£ t·ª´ m√°y t√≠nh ti·ªÅn).

:::

## H√†m ƒëi·ªÅu ch·ªânh h√≥a ƒë∆°n
H√†m ƒëi·ªÅu ch·ªânh h√≥a ƒë∆°n `AdjustInvMTT`:

H√†m: `AdjustInvMTT(Account, ACpass, xmlInvData, username, pass, fkey, AttachFile, convert, pattern, serial, OldPattern).`

### **M√¥ t·∫£**
ƒê√¢y l√† web service th·ª±c hi·ªán ƒëi·ªÅu ch·ªânh h√≥a ƒë∆°n

### **Tham s·ªë ƒë·∫ßu v√†o**
- userName / userPass: T√†i kho·∫£n ƒë∆∞·ª£c c·∫•p ph√°t cho kh√°ch h√†ng ƒë·ªÉ g·ªçi ƒë·∫øn webservice (t√†i kho·∫£n c√≥ quy·ªÅn ServiceRole trong h·ªá th·ªëng).
- Account/ACPass:  T√†i kho·∫£n ƒë∆∞·ª£c c·∫•p ph√°t cho nh√¢n vi√™n g·ªçi l·ªánh ph√°t h√†nh h√≥a ƒë∆°n
- xmlInvData: String XML d·ªØ li·ªáu h√≥a ƒë∆°n c≈© v√† h√≥a ƒë∆°n ƒëi·ªÅu ch·ªânh
- fkey: Chu·ªói x√°c ƒë·ªãnh h√≥a ƒë∆°n c·∫ßn ƒëi·ªÅu ch·ªânh
- Convert: M·∫∑c ƒë·ªãnh l√† 0, (0 ‚Äì Kh√¥ng c·∫ßn convert t·ª´ TCVN3 sang Unicode. 1- C·∫ßn convert t·ª´ TCVN3 sang Unicode)
- Pattern: M·∫´u s·ªë
- Serial: K√Ω hi·ªáu
- AttachFile: ƒê∆∞·ªùng d·∫´n file bi√™n b·∫£n ho·∫∑c key ƒë·ªÉ sinh bi√™n b·∫£n t·ª± ƒë·ªông (=10: sinh bi√™n b·∫£n t·ª± ƒë·ªông, =11: sinh v√† k√Ω bi√™n b·∫£n t·ª± ƒë·ªông, != 10 v√† !=11: ƒê∆∞·ªùng d·∫´n file bi√™n b·∫£n)
- OldPattern: Pattern h√≥a ƒë∆°n c≈© (tr∆∞·ªùng h·ª£p mu·ªën ƒëi·ªÅu ch·ªânh kh√°c m·∫´u s·ªë)

```md title="M·∫´u xmlInvData"
<DieuChinhHD>
   <key>Fkey c·ªßa h√≥a ƒë∆°n ƒë·ªÉ ph√¢n bi·ªát h√≥a ƒë∆°n xu·∫•t cho kh√°ch h√†ng n√†o *</key> 
   <Type>Lo·∫°i h√≥a ƒë∆°n ch·ªânh s·ª≠a(int-m·∫∑c ƒë·ªãnh l·∫•y l√† 2)  2-ƒêi·ªÅu ch·ªânh tƒÉng, 3-ƒêi·ªÅu ch·ªânh gi·∫£m, 4- H√≥a ƒë∆°n ƒëi·ªÅu ch·ªânh th√¥ng tin</Type>
    <TTChung>
    <NLap> Ng√†y l·∫≠p (ƒë·ªãnh d·∫°ng theo chu·∫©n thu·∫ø: yyyy-MM-dd)</Nlap>
    <DVTTe>ƒê∆°n v·ªã ti·ªÅn t·ªá *</DVTTe>
    <TGia>T·ª∑ gi√° (B·∫Øt bu·ªôc (Tr·ª´ tr∆∞·ªùng h·ª£p ƒê∆°n v·ªã ti·ªÅn t·ªá l√† VND))</TGia>
    <HTTToan>H√¨nh th·ª©c thanh to√°n </HTTToan>
    <TTKhac>
        <TTin>
          <TTruong>Extra</TTruong>
          <KDLieu>string</KDLieu>
          <DLieu>Extra test</DLieu>
        </TTin>
        <TTin>
          <TTruong>Extra1</TTruong>
          <KDLieu>string</KDLieu>
          <DLieu>Extra1 test</DLieu>
        </TTin>
        <TTin>
          <TTruong>Extra2</TTruong>
          <KDLieu>string</KDLieu>
          <DLieu>Extra2 test</DLieu>
        </TTin>
      </TTKhac>

     </TTChung>
     <NDHDon>
    <NMua>
      <Ten>T√™n</Ten>
      <MST>M√£ s·ªë thu·∫ø</MST>
      <SDThoai>S·ªë ƒëi·ªán tho·∫°i</SDThoai>
      <CCCDan>CƒÉn c∆∞·ªõc c√¥ng d√¢n </CCCDan>
      <DCTDTu>ƒê·ªãa ch·ªâ th∆∞ ƒëi·ªán t·ª≠ </DCTDTu>
      <MKHang>M√£ kh√°ch h√†ng </MKHang>
      <TTKhac>
          <TTin>
            <TTruong>Extra6</TTruong>
            <KDLieu>string</KDLieu>
             <DLieu>Extra6 test</DLieu>
          </TTin>
          <TTin>
            <TTruong>Extra7</TTruong>
            <KDLieu>string</KDLieu>
            <DLieu>Extra7 test</DLieu>
          </TTin>
          <TTin>
            <TTruong>Extra8</TTruong>
            <KDLieu>string</KDLieu>
            <DLieu>Extra8 test</DLieu>
          </TTin>
        </TTKhac>
    </NMua>
    <DSHHDVu>
      <HHDVu>
        <TChat>T√≠nh ch·∫•t * (1-H√†ng h√≥a, d·ªãch v·ª•; 2-Khuy·∫øn m·∫°i; 3-Chi·∫øt kh·∫•u th∆∞∆°ng m·∫°i (trong tr∆∞·ªùng h·ª£p mu·ªën th·ªÉ hi·ªán th√¥ng tin chi·∫øt kh·∫•u theo d√≤ng); 4-Ghi ch√∫/di·ªÖn gi·∫£i)</TChat>
        <STT>S·ªë th·ª© t·ª±</STT>
        <MHHDVu>M√£ h√†ng h√≥a, d·ªãch v·ª• (B·∫Øt bu·ªôc n·∫øu c√≥)</MHHDVu>
        <THHDVu>T√™n h√†ng h√≥a, d·ªãch v·ª• *</THHDVu>
        <DVTinh>ƒê∆°n v·ªã t√≠nh (B·∫Øt bu·ªôc n·∫øu c√≥)</DVTinh>
        <SLuong>S·ªë l∆∞·ª£ng (B·∫Øt bu·ªôc n·∫øu c√≥)</SLuong>
        <DGia>ƒê∆°n gi√° (B·∫Øt bu·ªôc n·∫øu c√≥)</DGia>
        <TLCKhau>T·ª∑ l·ªá % chi·∫øt kh·∫•u</TLCKhau>
        <STCKhau>S·ªë ti·ªÅn chi·∫øt kh·∫•u </STCKhau>
        <ThTien>Th√†nh ti·ªÅn (Th√†nh ti·ªÅn ch∆∞a c√≥ thu·∫ø GTGT) - B·∫Øt bu·ªôc tr·ª´ tr∆∞·ªùng h·ª£p TChat = 4</ThTien>
        <TSuat>Thu·∫ø su·∫•t (Thu·∫ø su·∫•t thu·∫ø GTGT)  Nh·∫≠n c√°c gi√° tr·ªã: -2 (KKKNT), -1 (KCT), 0, 5, 8, 10, 12.34 (thu·∫ø kh√°c: AB.CD), -3 (KHAC) </TSuat> <!--s·ª≠ d·ª•ng h√≥a ƒë∆°n GTGT-->
        <TThue>Ti·ªÅn thu·∫ø</TThue><!--s·ª≠ d·ª•ng h√≥a ƒë∆°n GTGT-->
                      <TSThue>Ti·ªÅn sau thu·∫ø</TSThue><!--s·ª≠ d·ª•ng h√≥a ƒë∆°n GTGT-->
        <TTKhac>
          <TTin>
            <TTruong>Extra1</TTruong>
            <KDLieu>string</KDLieu>
             <DLieu>Extra1 pd test</DLieu>
          </TTin>
          <TTin>
            <TTruong>Extra2</TTruong>
            <KDLieu>string</KDLieu>
            <DLieu>Extra2 pd test</DLieu>
          </TTin>
          </TTKhac>
        
      </HHDVu>
    </DSHHDVu>
    <TToan>
      <THTTLTSuat><!--s·ª≠ d·ª•ng h√≥a ƒë∆°n GTGT-->
        <LTSuat>
          <TSuat>Thu·∫ø su·∫•t (Thu·∫ø su·∫•t thu·∫ø GTGT)  Nh·∫≠n c√°c gi√° tr·ªã: -2 (KKKNT), -1 (KCT), 0, 5, 8, 10, 12.34 (thu·∫ø kh√°c: AB.CD), -3 (KHAC) </TSuat>
          <TThue>Ti·ªÅn thu·∫ø (Ti·ªÅn thu·∫ø GTGT)</TThue>
          <ThTien>Th√†nh ti·ªÅn (Th√†nh ti·ªÅn ch∆∞a c√≥ thu·∫ø GTGT)</ThTien>
        </LTSuat>
      </THTTLTSuat>
      <TgTCThue>T·ªïng ti·ªÅn ch∆∞a thu·∫ø (T·ªïng c·ªông th√†nh ti·ªÅn ch∆∞a c√≥ thu·∫ø GTGT) (B·∫Øt bu·ªôc v·ªõi h√≥a ƒë∆°n GTGT)</TgTCThue><!--s·ª≠ d·ª•ng h√≥a ƒë∆°n GTGT-->
      <TgTThue>T·ªïng ti·ªÅn thu·∫ø (T·ªïng c·ªông ti·ªÅn thu·∫ø GTGT) (B·∫Øt bu·ªôc v·ªõi h√≥a ƒë∆°n GTGT)</TgTThue><!--s·ª≠ d·ª•ng h√≥a ƒë∆°n GTGT-->
      <TTCKTMai>T·ªïng ti·ªÅn chi·∫øt kh·∫•u th∆∞∆°ng m·∫°i</TTCKTMai>
      <TgTTTBSo>T·ªïng ti·ªÅn thanh to√°n b·∫±ng s·ªë *</TgTTTBSo>
      <TgTTTBChu>T·ªïng ti·ªÅn thanh to√°n b·∫±ng ch·ªØ *</TgTTTBChu>
      <TTKhac>
          <TTin>
            <TTruong>Extra9</TTruong>
            <KDLieu>string</KDLieu>
             <DLieu>Extra9 test</DLieu>
          </TTin>
          <TTin>
            <TTruong>Extra10</TTruong>
            <KDLieu>string</KDLieu>
            <DLieu>Extra10 test</DLieu>
          </TTin>
          <TTin>
            <TTruong>Extra11</TTruong>
            <KDLieu>DateTime</KDLieu>
            <DLieu>ƒë·ªãnh d·∫°ng theo chu·∫©n thu·∫ø:(v√≠ d·ª•: yyyy-MM-dd)</DLieu>
          </TTin>
        </TTKhac>
    </TToan>
  </NDHDon>
</DieuChinhHD>
```
### **K·∫øt qu·∫£ ƒë·∫ßu ra**
N·∫øu h√†m g·ª≠i th√†nh c√¥ng, k·∫øt qu·∫£ ƒë·∫ßu ra s·∫Ω l√†:

```shell
OK: pattern;serial-Fkey_invNumber_MCCQT

```
Trong ƒë√≥: 
- OK ü°™ ƒë√£ ph√°t h√†nh h√≥a ƒë∆°n th√†nh c√¥ng
- Patternü°™ M·∫´u s·ªë c·ªßa h√≥a ƒë∆°n ƒëi·ªÅu ch·ªânh 
- Serial ü°™ serial c·ªßa h√≥a ƒë∆°n ƒëi·ªÅu ch·ªânh 
- Fkey-> fkey c·ªßa h√≥a ƒë∆°n
- invNumber: s·ªë h√≥a ƒë∆°n ƒëi·ªÅu ch·ªânh 
- MCCQT -> M√£ CQT

vd:
```shell
OK:1/004;C22MTC-81971004C22MTC128418474_128_M1-22-10F0B-00400000128
```
### **M√£ l·ªói trong qu√° tr√¨nh t√≠ch h·ª£p**

:::danger ERR1

T√†i kho·∫£n ƒëƒÉng nh·∫≠p sai ho·∫∑c kh√¥ng c√≥ quy·ªÅn

:::

:::danger ERR2

Pattern ho·∫∑c serial truy·ªÅn v√†o r·ªóng

:::

:::danger ERR3

D·ªØ li·ªáu xml ƒë·∫ßu v√†o kh√¥ng ƒë√∫ng quy ƒë·ªãnh

:::

:::danger ERR4

Kh√¥ng l·∫•y ƒë∆∞·ª£c th√¥ng tin c√¥ng ty (currentCompany null)

:::

:::danger ERR11

Pattern ho·∫∑c serial kh√¥ng ƒë√∫ng ƒë·ªãnh d·∫°ng

:::

:::danger ERR5

C√≥ l·ªói trong qu√° tr√¨nh thay th·∫ø h√≥a ƒë∆°n

:::

:::danger ERR6

D·∫£i h√≥a ƒë∆°n c≈© ƒë√£ h·∫øt

:::

:::danger ERR7

User name kh√¥ng ph√π h·ª£p, kh√¥ng t√¨m th·∫•y company t∆∞∆°ng ·ª©ng cho user.

:::

:::danger ERR8

H√≥a ƒë∆°n c·∫ßn ƒëi·ªÅu ch·ªânh ƒë√£ b·ªã thay th·∫ø. Kh√¥ng th·ªÉ ƒëi·ªÅu ch·ªânh ƒë∆∞·ª£c n·ªØa.

:::

:::danger ERR9

Tr·∫°ng th√°i h√≥a ƒë∆°n kh√¥ng ƒë∆∞·ª£c ƒëi·ªÅu ch·ªânh

:::

:::danger ERR13

L·ªói tr√πng fkey

:::

:::danger ERR14

L·ªói trong qu√° tr√¨nh th·ª±c hi·ªán c·∫•p s·ªë h√≥a ƒë∆°n

:::

:::danger ERR15

L·ªói khi th·ª±c hi·ªán Deserialize chu·ªói h√≥a ƒë∆°n ƒë·∫ßu v√†o (ng√†y h√≥a ƒë∆°n > ng√†y hi·ªán t·∫°i, h√≥a ƒë∆°n ngo·∫°i t·ªá kh√¥ng truy·ªÅn t·ª∑ gi√°)

:::

:::danger ERR16

Kh√¥ng t·ªìn t·∫°i h√≥a ƒë∆°n

:::

:::danger ERR17

Ng√†y h√≥a ƒë∆°n ƒëi·ªÅu ch·ªânh < ng√†y h√≥a ƒë∆°n b·ªã ƒëi·ªÅu ch·ªânh

:::

:::danger ERR19

Pattern truy·ªÅn v√†o kh√¥ng gi·ªëng v·ªõi h√≥a ƒë∆°n c·∫ßn ƒëi·ªÅu ch·ªânh

:::

:::danger ERR20

D·∫£i h√≥a ƒë∆°n h·∫øt, User/Account kh√¥ng c√≥ quy·ªÅn v·ªõi Serial/Pattern v√† serial kh√¥ng ph√π h·ª£p

:::

:::danger ERR21

Tr√πng s·ªë h√≥a ƒë∆°n

:::

:::danger ERR22

Th√¥ng tin ng∆∞·ªùi b√°n v∆∞·ª£t maxlength

:::

:::danger ERR23

M√£ CQT r·ªóng

:::

:::danger ERR29

L·ªói ch·ª©ng th∆∞ h·∫øt h·∫°n

:::

:::danger ERR30

Danh s√°ch h√≥a ƒë∆°n t·ªìn t·∫°i ng√†y h√≥a ƒë∆°n nh·ªè h∆°n ng√†y h√≥a ƒë∆°n ƒë√£ ph√°t h√†nh

:::

:::danger ERR60

Ch·ªâ ƒë∆∞·ª£c ph√©p ƒëi·ªÅu ch·ªânh h√≥a ƒë∆°n c√πng lo·∫°i (C√≥ m√£ t·ª´ m√°y t√≠nh ti·ªÅn).

:::

:::danger ERR61

Ch·ªâ ƒë∆∞·ª£c ph√©p ƒëi·ªÅu ch·ªânh h√≥a ƒë∆°n c√πng lo·∫°i (HD GTGT / HD b√°n h√†ng...).

:::

